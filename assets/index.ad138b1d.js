const T=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}};T();class o{constructor(){}static getAirplane(){return document.querySelector("#airplane")}static render(){o.getAirplane().style.display="block"}static move1(){o.getAirplane().style.position="absolute",o.getAirplane().style.transform="rotate(66deg)",o.getAirplane().style.top="14vh",o.getAirplane().style.left="25vw",o.getAirplane().style.transition="top 4s, left 4s"}static move2(){o.getAirplane().style.transform="rotate(90deg)",o.getAirplane().style.top="32vh",o.getAirplane().style.left="51vw",o.getAirplane().style.transition="top 4s, left 4s"}static move3(){let e=document.querySelector("#airplane");e.src="assets/map/boat.png",o.getAirplane().style.transform="rotate(0deg) ",o.getAirplane().style.top="61vh",o.getAirplane().style.left="55vw",o.getAirplane().style.transition="top 4s, left 4s"}static move4(){o.getAirplane().style.top="85vh",o.getAirplane().style.left="30vw",o.getAirplane().style.transition="top 4s, left 4s"}}class u{constructor(e,t,n){this.value=e,this.bestMatch=t,this.clicked=!1,this.col=n,this.linkedValue=null,this.line=document.createElementNS("http://www.w3.org/2000/svg","line")}link(e,t){e.linkedValue==null&&(e.linkedValue=this,e.line=t,this.linkedValue=e,this.line=t)}unlink(){this.linkedValue.linkedValue=null,this.linkedValue.line=null,this.linkedValue=null,this.line=null}test(){var e;return this.bestMatch==((e=this.linkedValue)===null||e===void 0?void 0:e.value)}createImage(e){let t=e*90+10;var n=document.createElementNS("http://www.w3.org/2000/svg","image");return n.setAttributeNS("http://www.w3.org/1999/xlink","href",`assets/emojis/${this.value}.png`),n.style.width="50px",n.style.marginLeft="30%",n.setAttribute("y",`${t}px`),n.addEventListener("mousedown",a=>{a.preventDefault(),a.target.classList.add("emoji-clicked")}),n}}class f{constructor(){this.column1=[new u("sunny","drought",1),new u("storm","landslide",1),new u("factory","water-pollution",1),new u("co2","global-warming",1)],this.column2=[new u("landslide","storm",2),new u("water-pollution","factory",2),new u("drought","sunny",2),new u("global-warming","co2",2)]}test(){let e=!0;return this.column1.forEach(t=>{t.test()||(e=!1)}),this.column2.forEach(t=>{t.test()||(e=!1)}),e}}class y{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0}createLine(){let e=document.createElementNS("http://www.w3.org/2000/svg","line");return e.setAttribute("x1",this.x1.toString()),e.setAttribute("y1",this.y1.toString()),e.setAttribute("x2",this.x2.toString()),e.setAttribute("y2",this.y2.toString()),e.style.width="5px",e.style.stroke="red",e}}class p{constructor(e){this.container=document.querySelector("#gameboard"),this.container.innerHTML="",this.TITLE=e.TITLE,this.NAME=e.NAME,this.DESCRIPTION=e.DESCRIPTION}render(){}start(){let e=document.querySelector("#gameboard");e.style.display="flex";let t=document.createElement("h1");t.innerHTML=this.TITLE,t.id="title";let n=document.createElement("h2");n.innerHTML=this.NAME,n.id="description";let a=document.createElement("div");a.innerHTML=this.DESCRIPTION,a.id="descriptionText",this.container.appendChild(t),this.container.appendChild(n),this.container.appendChild(a),this.render()}}const E={INITIAL:"assets/map/macaronesia_contaminado.jpg",FINAL:"assets/map/macaronesia.png",AZORES:"assets/map/azores.png",MADEIRA:"assets/map/madeira.png",CANARIAS:"assets/map/canarias.png",CABOVERDE:"assets/map/cabo.png"},I="assets/map/cover.png",h={AZORES:{TITLE:"AZORES",NAME:"CONSTRUYE UN UNA AZOTEA ECOL\xD3GICA",DESCRIPTION:"ACABAS DE LLEGAR A AZORES, PERO PARECE QUE EN MAL TIEMPO, HA HABIDO UNA INUNDACI\xD3N. AYUDA A CONSTRUIR UN ESPACIO ECOL\xD3GICO PARA LOS HABITANTES DE AZORES"},MADEIRA:{TITLE:"MADEIRA",NAME:"ENCUENTRA LAS CAUSAS Y EFECTOS",DESCRIPTION:"SE HAN MEZCLADO LOS ESTUDIOS, AYUDA A CLASIFICARLOS"},CANARIAS:{TITLE:"CANARIAS",NAME:"RESUELVE EL PUZLE",DESCRIPTION:"HA HABIDO UNA PEQUE\xD1A INTOXICACI\xD3N EN LA COMIDA, TE HAS SALVADO POR POCO, PERO TE HAN PEDIDO QUE HAGAS UN CARTEL SOBRE LA CIG\xDCATERA, AYUDALES"},CABOVERDE:{TITLE:"CABO VERDE",NAME:"DEMUESTRA TU CONOCIMIENTO",DESCRIPTION:"ESTE ES EL \xDALTIMO RETO, ACIERTA TODAS LAS PREGUNTAS PARA ENSE\xD1AR LO QUE SABES DEL CAMBIO CLIM\xC1TICO"}};class A extends p{constructor(){super(h.AZORES)}endScreen(){let e=document.createTextNode("Reto Consegido"),t=document.createTextNode("Las azoteas naturales mejoran la gesti\xF3n de recursos, a trav\xE9s de procesos eficientes de consumo de materia y energ\xEDa. Esto permite adaptarse mejor a los efectos del cambio clim\xE1tico como es el caso de las lluvias y vendavales."),n=document.createElement("div"),a=document.createElement("h1"),i=document.createElement("button");i.innerHTML="Continua con tu aventura",a.appendChild(e),n.appendChild(a),n.appendChild(t),n.appendChild(i),i.addEventListener("click",()=>{this.container.style.display="none",this.container.innerHTML="",c.dialog2()}),this.container.appendChild(n)}render(){const e=document.createElement("button");e.innerHTML="saltar juego",e.addEventListener("click",()=>{this.container.innerHTML="",this.endScreen()}),this.container.appendChild(e)}}class C{constructor(){this.questions=[{question:"pregunta 1",answers:["reserva natural garajau","sitio_2","sitio_3","sitio_4"],correct:"reserva natural garajau"},{question:"pregunta 2",answers:["reserva natural garajau","sitio_2","sitio_3","sitio_4"],correct:"sitio_3"},{question:"pregunta 1",answers:["reserva natural garajau","sitio_2","sitio_3","sitio_4"],correct:"sitio_2"}]}}class b extends p{constructor(){super(h.CABOVERDE);this.index=0,this.caboVerdeGame=new C}endScreen(){let e=document.createTextNode("Reto Consegido"),t=document.createTextNode("Las azoteas naturales mejoran la gesti\xF3n de recursos, a trav\xE9s de procesos eficientes de consumo de materia y energ\xEDa. Esto permite adaptarse mejor a los efectos del cambio clim\xE1tico como es el caso de las lluvias y vendavales."),n=document.createElement("div"),a=document.createElement("h1"),i=document.createElement("button");i.innerHTML="Continua con tu aventura",a.appendChild(e),n.appendChild(a),n.appendChild(t),n.appendChild(i),i.addEventListener("click",()=>{this.container.style.display="none",this.container.innerHTML="";let s=document.querySelector("#img-map");s.src=E.FINAL,c.dialog8()}),this.container.appendChild(n)}render(){this.container.innerHTML="";let{questions:e}=this.caboVerdeGame,t=document.createElement("h1");t.innerHTML=e[this.index].question,this.container.appendChild(t);for(let n=0;n<e[this.index].answers.length;n++){let a=document.createElement("div"),i=e[this.index].answers[n];a.innerHTML=i,a.classList.add("answer"),a.addEventListener("click",s=>{if(i==e[this.index].correct)if(this.index++,this.index>=e.length){this.container.innerHTML="",this.endScreen();return}else this.render();else s.target.classList.add("incorrect")}),this.container.appendChild(a)}}}class S extends p{constructor(){super(h.CANARIAS);this.index=0}endScreen(){this.container.innerHTML="";let e=document.createTextNode("Reto Consegido"),t=document.createTextNode("La ciguatera es un tipo de intoxicaci\xF3n alimentaria producida por el consumo de pescado que contiene ciguatoxinas. Esta toxina marina microsc\xF3pica se va acumulando a trav\xE9s de la cadena alimenticia donde los peces m\xE1s peque\xF1os son comidos por lo peces m\xE1s grandes. Es importante saber que esta toxina no se elimina por ninguna t\xE9cnica de conservaci\xF3n o cocinado (congelaci\xF3n, marinado, ahumado, frito, cocido, horno o plancha). El consumo accidental por parte del ser humano de especies con altos niveles de ciguatoxina suele venir asociado con problemas gastrointestinales, cardiovasculares y neurol\xF3gicos. La ciguatera es una intoxicaci\xF3n t\xEDpica de las \xE1reas tropicales y subtropicales, sin embargo, se han registrado casos en la \xFAltima d\xE9cada en Espa\xF1a y Portugal. La aparici\xF3n de esta toxina en la Regi\xF3n Macaron\xE9sica es un indicador de c\xF3mo el calentamiento global de los oc\xE9anos afecta a la seguridad alimentaria."),n=document.createElement("div"),a=document.createElement("h1"),i=document.createElement("button");i.innerHTML="Continua con tu aventura",a.appendChild(e),n.appendChild(a),n.appendChild(t),n.appendChild(i),i.addEventListener("click",()=>{this.container.style.display="none",this.container.innerHTML="",c.dialog5()}),this.container.appendChild(n)}render(){const e=document.createElement("button");e.innerHTML="saltar juego",e.addEventListener("click",()=>{this.container.innerHTML="",this.endScreen()}),this.container.appendChild(e)}selectedItem(e){let t=e.target;console.log(t);let n=e.clientX,a=e.clientY,i=parseFloat(t.getAttribute("x")||""),s=parseFloat(t.getAttribute("y")||"");t.addEventListener("mousemove",l=>this.movement(t,l,n,a,i,s))}movement(e,t,n,a,i,s){var l=t.clientX-n,r=t.clientY-a;console.log(i),e.setAttribute("x",(i+l).toString()),e.setAttribute("y",(s+r).toString()),e.addEventListener("mouseout",m=>this.deselectedItem(e)),e.addEventListener("mouseup",m=>this.deselectedItem(e))}deselectedItem(e){e.removeEventListener("mousemove",t=>{this.movement}),e.removeEventListener("mouseout",()=>{this.deselectedItem}),e.removeEventListener("mouseup",()=>{this.deselectedItem})}}class c{constructor(){}static dialog1(){document.getElementById("dialog").style.display="flex";let e="...mientras el capit\xE1n resuelve el problema del aterrizaje, ayuda a los ciudadanos a resolver el problema en sus calles y casas.",t=0,n=3e3/e.length;async function a(){t<e.length?(document.getElementById("dialog").innerHTML+=e.charAt(t),t++,setTimeout(a,n)):await(s=>new Promise(l=>setTimeout(()=>{new A().start(),document.getElementById("dialog").style.display="none"},s)))(2e3)}a()}static dialog2(){document.getElementById("dialog").innerHTML="",document.getElementById("dialog").style.display="flex";let e="Gracias a la destreza del piloto, el avi\xF3n aterriza y haces una visita gastron\xF3mica por el lugar y te da tiempo a probar los deliciosos quesos elaborados de manera artesanal y sostenible que se elaboran en todo el archipi\xE9lago de Azores.",t=0,n=3e3/e.length;function a(){t<e.length?(document.getElementById("dialog").innerHTML+=e.charAt(t),t++,setTimeout(a,n)):(o.move2(),setTimeout(()=>{g.dialog2()},4e3),document.getElementById("dialog").style.display="none")}a()}static dialog3(){document.getElementById("dialog").innerHTML="",document.getElementById("dialog").style.display="flex";let e=" No disponemos a salir para nuestro pr\xF3ximo destino, pero en las noticias anuncian una nueva entrada de calima. Es la en\xE9sima intrusi\xF3n de polvo sahariano que viven las Islas en lo que va de a\xF1o. El avi\xF3n no podr\xE1 aterrizar en las Islas Canarias por poca visibilidad por lo que debemos continuar nuestro viaje en Barco",t=0,n=3e3/e.length;o.move3();function a(){t<e.length?(document.getElementById("dialog").innerHTML+=e.charAt(t),t++,setTimeout(a,n)):setTimeout(()=>{g.dialog3(),document.getElementById("dialog").style.display="none"},2e3)}a()}static dialog4(){document.getElementById("dialog").innerHTML="",document.getElementById("dialog").style.display="flex";let e=" ... para continuar nuestro viaje debes ayudar a la doctora a emitir el diagn\xF3stico, \xBFCu\xE1l ser\xE1 la causa de la enfermedad de los pasajeros? \xBFQu\xE9 habr\xE1n comido?",t=0,n=2e3/e.length;function a(){t<e.length?(document.getElementById("dialog").innerHTML+=e.charAt(t),t++,setTimeout(a,n)):setTimeout(()=>{new S().start(),document.getElementById("dialog").style.display="none"},2e3)}a()}static dialog5(){document.getElementById("dialog").innerHTML="",document.getElementById("dialog").style.display="flex";let e="La doctora tiene la intoxicaci\xF3n controlada y todos los pasajeros se encuentran ya en buen estado de salud por lo que se decide continuar el viaje hasta nuestro \xFAltimo destino, Cabo Verde.!",t=0,n=2e3/e.length;function a(){t<e.length?(document.getElementById("dialog").innerHTML+=e.charAt(t),t++,setTimeout(a,n)):(o.move4(),setTimeout(()=>{c.dialog6(),document.getElementById("dialog").style.display="none"},4e3))}a()}static dialog6(){document.getElementById("dialog").innerHTML="",document.getElementById("dialog").style.display="flex";let e="Llegamos a nuestro destino final!",t=0,n=2e3/e.length;o.move4();function a(){t<e.length?(document.getElementById("dialog").innerHTML+=e.charAt(t),t++,setTimeout(a,n)):(g.dialog4(),document.getElementById("dialog").style.display="none")}a()}static dialog7(){document.getElementById("dialog").innerHTML="",document.getElementById("dialog").style.display="flex";let e=`
        El cambio clim\xE1tico es uno de los grandes desaf\xEDos a los que debemos enfrentarnos sin demora, tras el recorrido en la Macaronesia has podido observar algunos efectos del cambio clim\xE1tico. \xBFCu\xE1nto saber sobre el tema? Te retamos a que pongas a pruebas tus conocimientos sobre la materia, \xA1seguro que descubres cosas nuevas!        `,t=0,n=2e3/e.length;function a(){t<e.length?(document.getElementById("dialog").innerHTML+=e.charAt(t),t++,setTimeout(a,n)):(new b().start(),document.getElementById("dialog").style.display="none")}a()}static dialog8(){document.getElementById("dialog").innerHTML="",document.getElementById("dialog").style.display="flex";let e=`
        Enhorabuena! Has demostrado inter\xE9s y ganas de actuar ante los efectos del cambio clim\xE1tico.
        Descarga tu diploma
        `,t=0,n=2e3/e.length;function a(){t<e.length&&(document.getElementById("dialog").innerHTML+=e.charAt(t),t++,setTimeout(a,n))}a()}}class M extends p{constructor(){super(h.MADEIRA);this.index=0,this.line=document.createElementNS("http://www.w3.org/2000/svg","line"),this.pairList=[],this.target=null,this.lineObj=new y}endScreen(){this.container.innerHTML="";let e=document.createTextNode("Reto Consegido"),t=document.createTextNode("El planeta se est\xE1 calentando, est\xE1 aumentando la temperatura promedio y van a ser cada vez m\xE1s frecuentes los eventos extremos: olas de calor y momentos de mucho fr\xEDo. Las Olas de Calor son episodios de temperaturas extremas muy altas que pueden tener consecuencias sobre la salud de la poblaci\xF3n: dermatitis, edemas, quemaduras, insolaci\xF3n, calambres, s\xEDncope por calor, etc"),n=document.createElement("div"),a=document.createElement("h1"),i=document.createElement("button");i.innerHTML="Continua con tu aventura",a.appendChild(e),n.appendChild(a),n.appendChild(t),n.appendChild(i),i.addEventListener("click",()=>{this.container.style.display="none",this.container.innerHTML="",c.dialog3()}),this.container.appendChild(n)}render(){let e=new f,t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.id="emojiContainer";let n=document.createElementNS("http://www.w3.org/2000/svg","g");n.id="col-1",e.column1.forEach((a,i)=>{let s=a.createImage(i);s.classList.add("col-1"),s.addEventListener("mousedown",l=>{this.addLine(l,a)}),n.appendChild(s)}),t.appendChild(n),n=document.createElementNS("http://www.w3.org/2000/svg","g"),n.id="col-2",e.column2.forEach((a,i)=>{let s=a.createImage(i);s.setAttribute("x","100px"),s.classList.add("col-2"),s.addEventListener("mousedown",l=>{this.addLine(l,a)}),n.appendChild(s)}),t.appendChild(n),t.addEventListener("mouseup",()=>{if(!e.test()){document.querySelectorAll("line").length>=e.column1.length&&(this.container.removeChild(t),this.render());return}this.endScreen()}),this.container.appendChild(t)}addLine(e,t){let n=e.target;if(t.linkedValue!=null&&(document.querySelector("#emojiContainer").removeChild(t.line),t.unlink()),this.target==null){let m=n.getBBox(),v=m.x+m.width*.5,L=m.y+m.height*.5;this.lineObj.x1=v,this.lineObj.y1=L,this.target=t;return}if(this.target==t)return;if(this.target.col==t.col){this.lineObj.x1=0,this.lineObj.y1=0,this.target=null;return}let a=n.getBBox(),i=a.x+a.width*.5,s=a.y+a.height*.5;this.lineObj.x2=i,this.lineObj.y2=s;let l=this.lineObj.createLine();this.lineObj=new y,this.target.link(t,l),this.target=null,document.querySelector("#emojiContainer").appendChild(l)}}class g{static dialog1(){let e="Pasajeros debido a fuertes turbulencias no podemos aterrizar en el Azores. Un fuerte temporal con lluvias torrenciales y vendavales azota las islas y han dejad importantes consecuencias tanto en las calles como en las casas de la ciudad",t=0,n=4e3/e.length,a=document.getElementById("dialog-container");a.style.display="flex";let i=document.getElementById("dialog-character");i.src="assets/map/pilot.png";let s=document.getElementById("dialog-msg");function l(){if(t<e.length)s.innerHTML+=e.charAt(t),t++,setTimeout(l,n);else{let r=document.createElement("button");r.innerHTML="Continuar >>",r.addEventListener("click",()=>{c.dialog1(),o.move1(),a.style.display="none"}),s.appendChild(r)}}l()}static dialog2(){let e="Madeira atraviesa por una fuerte ola de calor beban mucha agua y si planean hacer senderismo informense  sobre las alertas que emiten las autoridades locales por las altas temperaturas.",t=document.getElementById("dialog-container");t.style.display="flex";let n=0,a=4e3/e.length,i=document.getElementById("dialog-character");i.src="assets/map/pilot.png";let s=document.getElementById("dialog-msg");s.innerHTML="";function l(){if(n<e.length)s.innerHTML+=e.charAt(n),n++,setTimeout(l,a);else{let r=document.createElement("button");r.innerHTML="Continuar >>",r.addEventListener("click",()=>{t.style.display="none",new M().start()}),s.appendChild(r)}}l()}static dialog3(){let e="Se\xF1ores pasajeros, es mi deber informarles que hay varios pasajeros que enfermaron por algo que comieron, hemos solicitado su traslado al hospital m\xE1s cercano. Les mantendremos informados ...",t=document.getElementById("dialog-container");t.style.display="flex";let n=0,a=4e3/e.length,i=document.getElementById("dialog-character");i.src="assets/map/doctor.png";let s=document.getElementById("dialog-msg");s.innerHTML="";function l(){if(n<e.length)s.innerHTML+=e.charAt(n),n++,setTimeout(l,a);else{let r=document.createElement("button");r.innerHTML="Continuar >>",r.addEventListener("click",()=>{t.style.display="none",c.dialog4()}),s.appendChild(r)}}l()}static dialog4(){let e="Se\xF1ores pasajeros hemos llegado a nuestro destino, el cielo esta despejado y tenemos una temperatura ambiente de 22\xBAC. No dejen de visitar la playa de Santa Mar\xEDa en la Isla de Sal, ni la ciudad de Mindelo en la isla de San Vicente, capital cultural de este maravilloso pa\xEDs.",t=document.getElementById("dialog-container");t.style.display="flex";let n=0,a=4e3/e.length,i=document.getElementById("dialog-character");i.src="assets/map/captain.png";let s=document.getElementById("dialog-msg");s.innerHTML="";function l(){if(n<e.length)s.innerHTML+=e.charAt(n),n++,setTimeout(l,a);else{let r=document.createElement("button");r.innerHTML="Continuar >>",r.addEventListener("click",()=>{t.style.display="none",c.dialog7()}),s.appendChild(r)}}l()}}class w{constructor(e){this.img=e}start(){}end(){}}class x extends w{constructor(){super(E.INITIAL);this.areas=document.querySelector("map"),this.azoresArea=document.querySelector("#azores"),this.madeiraArea=document.querySelector("#madeira"),this.canariasArea=document.querySelector("#canarias"),this.caboVerdeArea=document.querySelector("#cabo-verde"),this.azoresGameRender=new A;let e=document.querySelector("#img-map");e.src=this.img}start(){let e=document.querySelector("#img-map");e.src=this.img,g.dialog1()}}class N{constructor(){this.settings={effects:50,music:50,name:""},this.initialMap=new x,this.storyDialog=new c,this.airplane=new o}updateSettings(e){this.settings=e}async start(){var e;let t=document.querySelector("#img-map");t.src=I,t.style.height="100vh";let n=document.createElement("button");n.innerHTML="Empezar >>",n.id="start-btn",(e=t.parentNode)===null||e===void 0||e.appendChild(n),n.addEventListener("click",()=>{o.render(),this.initialMap.start(),t.parentNode.removeChild(n)})}}let O=new N;O.start();
