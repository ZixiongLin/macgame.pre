const S=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}};S();class s{constructor(){}static getAirplane(){return document.querySelector("#airplane")}static render(){s.getAirplane().style.display="block"}static move1(){s.getAirplane().style.transform="translateY(20vh) translateX(20vw) rotate(135deg)",s.getAirplane().style.transition="transform 4s ease-out"}static move2(){s.getAirplane().style.transform=" translateY(35vh) translateX(50vw) rotate(90deg) ",s.getAirplane().style.transition="transform 4s ease-out"}static move3(){let e=document.querySelector("#airplane");e.src="assets/map/boat.png",s.getAirplane().style.transform=" translateY(65vh) translateX(55vw) rotate(0deg) ",s.getAirplane().style.transition="transform 4s ease-out"}static move4(){s.getAirplane().style.transform=" translateY(70vh) translateX(25vw) rotate(-5deg)",s.getAirplane().style.transition="transform 4s ease-out"}}class u{constructor(e){this.container=document.querySelector("#gameboard"),this.container.innerHTML="",this.TITLE=e.TITLE,this.NAME=e.NAME,this.DESCRIPTION=e.DESCRIPTION}render(){}addCloseButton(){let e=document.createElement("button");e.innerHTML="X",e.id="close",e.addEventListener("click",()=>{this.container.innerHTML=""}),this.container.appendChild(e)}start(){let e=document.querySelector("#gameboard");e.style.display="flex",this.addCloseButton();let t=document.createElement("h1");t.innerHTML=this.TITLE,t.id="title";let n=document.createElement("h2");n.innerHTML=this.NAME,n.id="description";let a=document.createElement("div");a.innerHTML=this.DESCRIPTION,a.id="descriptionText",this.container.appendChild(t),this.container.appendChild(n),this.container.appendChild(a),this.render()}}const g={initial:[`Las islas debido a su situaci\xF3n geogr\xE1fica, son los territorios m\xE1s expuestos y vulnerables a los efectos del cambio
                clim\xE1tico. El aumento de temperatura, las variaciones en la precipitaci\xF3n y la elevaci\xF3n del nivel del mar son tres de
                las consecuencias m\xE1s destacadas de este cambio clim\xE1tico. Este es el caso de la regi\xF3n Macaron\xE9sica, en la que se
                encuentran los archipi\xE9lagos de Azores, Madeira, Canarias y Cabo Verde.
                Comparten semejanzas, entre otras cosas, en su climatolog\xEDa y su biodiversidad lo que los hace m\xE1s vulnerables al
                aumento de las temperaturas, las lluvias torrenciales, la subida del nivel del mar, las sequ\xEDas prolongadas y los
                episodios de vientos fuertes y calimas extremas. As\xED como la actividad humana a lo largo de estos a\xF1os, ha sido el
                principal motor del calentamiento global y con \xE9l, el cambio en los patrones de los fen\xF3menos meteorol\xF3gicos.
                Est\xE1 en nuestras manos actuar y adaptarnos a estos cambios y contribuir con acciones cotidianas a mejorar el
                planeta en el que vivimos.
                Te invitamos a conocer la Macaronesia, viaja por nuestros h\xE1bitats y cambia tus h\xE1bitos`],azores_1:["LAS ISLAS DE AZORES, AQU\xCD EN LA GU\xCDA DICE QUE SE HAN CENTRADO EN LA GANADERIA ECOL\xD3GICA","ES UN GRAN PARAISO PARA LAS VACAS","PARECE QUE TIENEN UN RETO CON ESTE TEMA","A VER SI ERES CAPAZ DE SOLUCIONARLO, \xA1\xC1NIMO!"],azores_2:["SABIA QUE PODIAS!","TAMPOCO ES TAN DIFICIL, AUNQUE TODAVIA NO HE TERMINADO....","ESPERA A QUE ACABE",`(20 mins despues) 
 POR FIN, BUENO AHORA TOCA IR A MADEIRA`]},c={azoresCoor:[2447,1575,1034,856],madeiraCoor:[4085,1684,3300,1185],canariasCoor:[3032,2004,4572,2954],caboVerdeCoor:[900,2553,2423,3539]},m={INITIAL:"assets/map/macaronesia.png",AZORES:"assets/map/azores.png",MADEIRA:"assets/map/madeira.png",CANARIAS:"assets/map/canarias.png",CABOVERDE:"assets/map/cabo.png"},I="assets/map/cover.png",h={AZORES:{TITLE:"AZORES",NAME:"CONSTRUYE UN UNA AZOTEA ECOL\xD3GICA",DESCRIPTION:"ACABAS DE LLEGAR A AZORES, PERO PARECE QUE EN MAL TIEMPO, HA HABIDO UNA INUNDACI\xD3N. AYUDA A CONSTRUIR UN ESPACIO ECOL\xD3GICO PARA LOS HABITANTES DE AZORES"},MADEIRA:{TITLE:"MADEIRA",NAME:"ENCUENTRA LAS CAUSAS Y EFECTOS",DESCRIPTION:"SE HAN MEZCLADO LOS ESTUDIOS, AYUDA A CLASIFICARLOS"},CANARIAS:{TITLE:"CANARIAS",NAME:"RESUELVE EL PUZLE",DESCRIPTION:"HA HABIDO UNA PEQUE\xD1A INTOXICACI\xD3N EN LA COMIDA, TE HAS SALVADO POR POCO, PERO TE HAN PEDIDO QUE HAGAS UN CARTEL SOBRE LA CIG\xDCATERA, AYUDALES"},CABOVERDE:{TITLE:"CABO VERDE",NAME:"DEMUESTRA TU CONOCIMIENTO",DESCRIPTION:"ESTE ES EL \xDALTIMO RETO, ACIERTA TODAS LAS PREGUNTAS PARA ENSE\xD1AR LO QUE SABES DEL CAMBIO CLIM\xC1TICO"}};class y extends u{constructor(){super(h.CANARIAS);this.index=0}endScreen(){this.container.innerHTML="";let e=document.createTextNode("Reto Consegido"),t=document.createTextNode("La ciguatera es un tipo de intoxicaci\xF3n alimentaria producida por el consumo de pescado que contiene ciguatoxinas. Esta toxina marina microsc\xF3pica se va acumulando a trav\xE9s de la cadena alimenticia donde los peces m\xE1s peque\xF1os son comidos por lo peces m\xE1s grandes. Es importante saber que esta toxina no se elimina por ninguna t\xE9cnica de conservaci\xF3n o cocinado (congelaci\xF3n, marinado, ahumado, frito, cocido, horno o plancha). El consumo accidental por parte del ser humano de especies con altos niveles de ciguatoxina suele venir asociado con problemas gastrointestinales, cardiovasculares y neurol\xF3gicos. La ciguatera es una intoxicaci\xF3n t\xEDpica de las \xE1reas tropicales y subtropicales, sin embargo, se han registrado casos en la \xFAltima d\xE9cada en Espa\xF1a y Portugal. La aparici\xF3n de esta toxina en la Regi\xF3n Macaron\xE9sica es un indicador de c\xF3mo el calentamiento global de los oc\xE9anos afecta a la seguridad alimentaria."),n=document.createElement("div"),a=document.createElement("h1"),i=document.createElement("button");i.innerHTML="Continua con tu aventura",a.appendChild(e),n.appendChild(a),n.appendChild(t),n.appendChild(i),i.addEventListener("click",()=>{this.container.style.display="none",this.container.innerHTML="",l.dialog6()}),this.container.appendChild(n)}render(){const e=document.createElement("button");e.innerHTML="saltar juego",e.addEventListener("click",()=>{this.container.innerHTML="",this.endScreen()}),this.container.appendChild(e)}selectedItem(e){let t=e.target;console.log(t);let n=e.clientX,a=e.clientY,i=parseFloat(t.getAttribute("x")||""),o=parseFloat(t.getAttribute("y")||"");t.addEventListener("mousemove",d=>this.movement(t,d,n,a,i,o))}movement(e,t,n,a,i,o){var d=t.clientX-n,p=t.clientY-a;console.log(i),e.setAttribute("x",(i+d).toString()),e.setAttribute("y",(o+p).toString()),e.addEventListener("mouseout",L=>this.deselectedItem(e)),e.addEventListener("mouseup",L=>this.deselectedItem(e))}deselectedItem(e){e.removeEventListener("mousemove",t=>{this.movement}),e.removeEventListener("mouseout",()=>{this.deselectedItem}),e.removeEventListener("mouseup",()=>{this.deselectedItem})}}class A{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0}createLine(){let e=document.createElementNS("http://www.w3.org/2000/svg","line");return e.setAttribute("x1",this.x1.toString()),e.setAttribute("y1",this.y1.toString()),e.setAttribute("x2",this.x2.toString()),e.setAttribute("y2",this.y2.toString()),e.style.width="5px",e.style.stroke="red",e}}class v extends u{constructor(){super(h.MADEIRA);this.index=0,this.line=document.createElementNS("http://www.w3.org/2000/svg","line"),this.pairList=[],this.target=null,this.lineObj=new A}endScreen(){this.container.innerHTML="";let e=document.createTextNode("Reto Consegido"),t=document.createTextNode("El planeta se est\xE1 calentando, est\xE1 aumentando la temperatura promedio y van a ser cada vez m\xE1s frecuentes los eventos extremos: olas de calor y momentos de mucho fr\xEDo. Las Olas de Calor son episodios de temperaturas extremas muy altas que pueden tener consecuencias sobre la salud de la poblaci\xF3n: dermatitis, edemas, quemaduras, insolaci\xF3n, calambres, s\xEDncope por calor, etc"),n=document.createElement("div"),a=document.createElement("h1"),i=document.createElement("button");i.innerHTML="Continua con tu aventura",a.appendChild(e),n.appendChild(a),n.appendChild(t),n.appendChild(i),i.addEventListener("click",()=>{this.container.style.display="none",this.container.innerHTML="",l.dialog4()}),this.container.appendChild(n)}render(){const e=document.createElement("button");e.innerHTML="saltar juego",e.addEventListener("click",()=>{this.container.innerHTML="",this.endScreen()}),this.container.appendChild(e)}addLine(e,t){var n;let a=e.target;if(this.target==null){let i=a.getBBox(),o=i.x+i.width*.5,d=i.y+i.height*.5;this.lineObj.x1=o,this.lineObj.y1=d,this.target=t;return}else if(this.target!=null){if(this.target.col==t.col){this.lineObj.x1=0,this.lineObj.y1=0,this.target=null,e.target;return}let i=a.getBBox(),o=i.x+i.width*.5,d=i.y+i.height*.5;this.lineObj.x2=o,this.lineObj.y2=d;let p=this.lineObj.createLine();this.lineObj=new A,this.target.link(t.value),t.link(this.target.value),this.target=null,(n=this.container.firstChild)===null||n===void 0||n.appendChild(p)}}}class l{constructor(e){this.continueButton=document.querySelector("#continue"),e=="initial"?this.dialogs=g.initial:e=="azores_1"?this.dialogs=g.azores_1:e=="azores_2"?this.dialogs=g.azores_2:this.dialogs=["SIN DEFINIR DIALOGO"],this.index=0,this.continueButton.addEventListener("click",()=>{this.update()},!1)}render(){let e=document.querySelector("#dialog-background");e.style.display="flex",document.querySelector("#container").classList.add("stop-scrolling");let n=document.querySelector("#dialog-msg"),a=document.createTextNode(this.dialogs[this.index]);n.appendChild(a);let i=document.createElement("img");i.id="sprite",i.src="assets/map/sprite.png",e.appendChild(i)}update(){if(this.index++,this.index>=this.dialogs.length){this.end();return}else{let e=document.querySelector("#dialog-msg");e.firstChild!=null&&(e.removeChild(e.firstChild),this.render());return}}end(){this.index=0,document.querySelector("#container").classList.remove("stop-scrolling");let t=document.querySelector("#dialog-background");t.style.display="none";let n=document.querySelector("#dialog-msg");if(this.continueButton.removeEventListener("click",()=>this.update(),!1),n.firstChild!=null){n.removeChild(n.firstChild);let a=document.querySelector("#sprite");t.removeChild(a)}s.move1()}static Dialog1(){let e=`El capit\xE1n del avi\xF3n nos informa que debido a fuertes turbulencias el avi\xF3n no puede aterrizar en el Archipi\xE9lago de Azores. 
Un fuerte temporal con lluvias torrenciales y vendavales azota las islas y han dejado importantes consecuencias tanto en las calles como en las casas de la ciudad, mientras el capit\xE1n resuelve el problema del aterrizaje, ayuda a los ciudadanos a resolver el problema en sus calles y casas.`,t=0,n=2e3/e.length;function a(){t<e.length&&(document.getElementById("dialog").innerHTML+=e.charAt(t),t++,setTimeout(a,n))}a()}static dialog2(){document.getElementById("dialog").innerHTML="";let e="Gracias a la destreza del piloto, el avi\xF3n aterriza y haces una visita gastron\xF3mica por el lugar y te da tiempo a probar los deliciosos quesos elaborados de manera artesanal y sostenible que se elaboran en todo el archipi\xE9lago de Azores.",t=0,n=2e3/e.length;function a(){t<e.length?(document.getElementById("dialog").innerHTML+=e.charAt(t),t++,setTimeout(a,n)):(s.move2(),l.dialog3())}a()}static dialog3(){document.getElementById("dialog").innerHTML="";let e="Continuamos el viaje con destino a Madeira. El capit\xE1n del avi\xF3n nos informa que Madeira atraviesa por una fuerte ola de calor y nos recomienda que bebamos mucha agua y si planeamos hacer senderismo nos informemos de las alertas que emiten las autoridades locales por las altas temperaturas.",t=0,n=2e3/e.length;s.move2();function a(){t<e.length?(document.getElementById("dialog").innerHTML+=e.charAt(t),t++,setTimeout(a,n)):new v().start()}a()}static dialog4(){document.getElementById("dialog").innerHTML="";let e=" No disponemos a salir para nuestro pr\xF3ximo destino, pero en las noticias anuncian una nueva entrada de calima. Es la en\xE9sima intrusi\xF3n de polvo sahariano que viven las Islas en lo que va de a\xF1o. El avi\xF3n no podr\xE1 aterrizar en las Islas Canarias por poca visibilidad por lo que debemos continuar nuestro viaje en Barco.",t=0,n=2e3/e.length;s.move3();function a(){t<e.length?(document.getElementById("dialog").innerHTML+=e.charAt(t),t++,setTimeout(a,n)):l.dialog5()}a()}static dialog5(){document.getElementById("dialog").innerHTML="";let e="La doctora del barco alerta a la tripulaci\xF3n y solicita el traslado a un hospital de varios pasajeros que enfermaron por algo que comieron, para continuar nuestro viaje debes ayudar a la doctora a emitir el diagn\xF3stico, \xBFCu\xE1l ser\xE1 la causa de la enfermedad de los pasajeros? \xBFQu\xE9 habr\xE1n comido?",t=0,n=2e3/e.length;function a(){t<e.length?(document.getElementById("dialog").innerHTML+=e.charAt(t),t++,setTimeout(a,n)):new y().start()}a()}static dialog6(){document.getElementById("dialog").innerHTML="";let e="La doctora tiene la intoxicaci\xF3n controlada y todos los pasajeros se encuentran ya en buen estado de salud por lo que se decide continuar el viaje hasta nuestro \xFAltimo destino, Cabo Verde.",t=0,n=2e3/e.length;s.move4();function a(){t<e.length?(document.getElementById("dialog").innerHTML+=e.charAt(t),t++,setTimeout(a,n)):l.dialog7()}a()}static dialog7(){document.getElementById("dialog").innerHTML="";let e=`
        Llegamos a nuestro destino final!, el capit\xE1n del barco nos informa sobre la climatolog\xEDa del lugar y nos recomienda no dejar de visitar la playa de Santa Mar\xEDa en la Isla de Sal, ni la ciudad de Mindelo en la isla de San Vicente, capital cultural de este maravilloso pa\xEDs. 
        

        El cambio clim\xE1tico es uno de los grandes desaf\xEDos a los que debemos enfrentarnos sin demora, tras el recorrido en la Macaronesia has podido observar algunos efectos del cambio clim\xE1tico. \xBFCu\xE1nto saber sobre el tema? Te retamos a que pongas a pruebas tus conocimientos sobre la materia, \xA1seguro que descubres cosas nuevas!
        `,t=0,n=2e3/e.length;function a(){t<e.length&&(document.getElementById("dialog").innerHTML+=e.charAt(t),t++,setTimeout(a,n))}a()}}class C{constructor(e){this.img=e}start(){}end(){}addAreas(){}}class E extends C{constructor(e,t){super(e);this.handler=()=>{},this.gameInit=!1,this.cleared=!1,this.startDialog=new l(`${t}_1`),this.endDialog=new l(`${t}_2`)}start(){let e=document.querySelector("#img-map");if(e.src=this.img,!this.gameInit){this.gameInit=!0,this.startDialog.render();let t=document.querySelector("#dialog-background");t.style.display="flex"}e.addEventListener("click",this.handler,!1)}end(){if(!this.cleared){let e=document.querySelector("#dialog-background");e.style.display="flex",this.endDialog.render(),document.querySelector("#img-map"),document.querySelector("#continue").addEventListener("click",()=>{this.endDialog.update()},!1),this.cleared=!0}}removeListener(){document.querySelector("#img-map").removeEventListener("click",this.handler,!1)}}class b extends E{constructor(){super(m.MADEIRA,"madeira");this.handler=()=>{this.gameInit=!0;let e=new v,t=document.querySelector("#gameboard-container");t.style.display="flex",e.start()}}}class T extends E{constructor(){super(m.CANARIAS,"canarias");this.handler=()=>{this.gameInit=!0;let e=new y,t=document.querySelector("#gameboard-container");t.style.display="flex",e.start()}}}class f{constructor(){this.questions=[{question:"pregunta 1",answers:["reserva natural garajau","sitio_2","sitio_3","sitio_4"],correct:"reserva natural garajau"},{question:"pregunta 2",answers:["reserva natural garajau","sitio_2","sitio_3","sitio_4"],correct:"sitio_3"},{question:"pregunta 1",answers:["reserva natural garajau","sitio_2","sitio_3","sitio_4"],correct:"sitio_2"}]}}class M extends u{constructor(){super(h.CABOVERDE);this.index=0,this.caboVerdeGame=new f}render(){this.container.innerHTML="";let{questions:e}=this.caboVerdeGame,t=document.createElement("h1");t.innerHTML=e[this.index].question,this.container.appendChild(t);for(let n=0;n<e[this.index].answers.length;n++){let a=document.createElement("div"),i=e[this.index].answers[n];a.innerHTML=i,a.classList.add("answer"),a.addEventListener("click",o=>{if(i==e[this.index].correct)if(this.index++,this.index>=e.length){this.container.innerHTML="";let d=document.createTextNode("Has ganado!!");this.container.appendChild(d);return}else this.render();else o.target.classList.add("incorrect")}),this.container.appendChild(a)}}}class O extends E{constructor(){super(m.CABOVERDE,"caboVerde");this.handler=()=>{this.gameInit=!0;let e=new M,t=document.querySelector("#gameboard-container");t.style.display="flex",e.start()}}}class R extends u{constructor(){super(h.AZORES)}endScreen(){let e=document.createTextNode("Reto Consegido"),t=document.createTextNode("Las azoteas naturales mejoran la gesti\xF3n de recursos, a trav\xE9s de procesos eficientes de consumo de materia y energ\xEDa. Esto permite adaptarse mejor a los efectos del cambio clim\xE1tico como es el caso de las lluvias y vendavales."),n=document.createElement("div"),a=document.createElement("h1"),i=document.createElement("button");i.innerHTML="Continua con tu aventura",a.appendChild(e),n.appendChild(a),n.appendChild(t),n.appendChild(i),i.addEventListener("click",()=>{this.container.style.display="none",this.container.innerHTML="",l.dialog3()}),this.container.appendChild(n)}render(){const e=document.createElement("button");e.innerHTML="saltar juego",e.addEventListener("click",()=>{this.container.innerHTML="",this.endScreen()}),this.container.appendChild(e)}}class N extends C{constructor(){super(m.INITIAL);this.areas=document.querySelector("map"),this.azoresArea=document.querySelector("#azores"),this.madeiraArea=document.querySelector("#madeira"),this.canariasArea=document.querySelector("#canarias"),this.caboVerdeArea=document.querySelector("#cabo-verde"),this.madeiraMap=new b,this.canariasMap=new T,this.caboVerdeMap=new O,this.azoresGameRender=new R;let e=document.querySelector("#img-map");e.src=this.img,window.addEventListener("resize",t=>{t.preventDefault(),this.resize()}),this.addAreas()}start(){let e=document.querySelector("#img-map");e.src=this.img;let t=document.querySelector("#dialog-background");t.style.display="flex"}resize(){let e=document.querySelector("#img-map"),t={height:e.clientHeight/3867,width:e.clientWidth/6900};this.azoresArea.coords=this.calculate(c.azoresCoor,t).join(", "),this.madeiraArea.coords=this.calculate(c.madeiraCoor,t).join(", "),this.canariasArea.coords=this.calculate(c.canariasCoor,t).join(", "),this.caboVerdeArea.coords=this.calculate(c.caboVerdeCoor,t).join(", ")}calculate(e,t){return[Math.floor(e[0]*t.width),Math.floor(e[1]*t.height),Math.floor(e[2]*t.width),Math.floor(e[3]*t.height)]}addAzores(){let e=document.querySelector("#img-map");e.src=this.img,this.resize(),l.Dialog1(),this.azoresArea.addEventListener("click",()=>{var t;this.areas.parentNode,(t=this.areas.parentNode)===null||t===void 0||t.removeChild(this.areas),this.azoresGameRender.start()})}addMadeira(){let e=document.querySelector("#img-map");e.src=this.img,this.resize(),this.azoresArea.addEventListener("click",()=>{var t;this.areas.parentNode,(t=this.areas.parentNode)===null||t===void 0||t.removeChild(this.areas),this.azoresGameRender.start()})}}class x{constructor(){this.settings={effects:50,music:50,name:""},this.initialMap=new N,this.dialog=new l("initial"),this.airplane=new s}updateSettings(e){this.settings=e}async start(){var e;let t=document.querySelector("#img-map");t.src=I,t.style.height="100vh";let n=document.createElement("button");n.innerHTML="Empezar >>",n.id="start-btn",(e=t.parentNode)===null||e===void 0||e.appendChild(n),n.addEventListener("click",()=>{s.render(),this.initialMap.start(),this.initialMap.addAzores(),t.parentNode.removeChild(n)})}}let q=new x;q.start();
